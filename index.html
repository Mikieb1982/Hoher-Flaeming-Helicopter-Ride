Of course. I‚Äôve updated the HUD to be less imposing while keeping the same style. The main changes involve reducing the size of the instrument panel, lowering its position, and softening the borders and shadows. I've also included a second version of the code with a more minimalist take on the same style.

Here is the updated code with the subtler HUD:

\<br\>

**index.html**

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Hoher Fl√§ming Helicopter Explorer - Enhanced</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* --- Reset and Variables --- */
        :root {
            --bg-panel: rgba(20, 20, 30, 0.85);
            --bg-panel-light: rgba(255, 255, 255, 0.95);
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --text-dark: #333333;
            --accent-primary: #00d4ff;
            --accent-secondary: #ff6b6b;
            --accent-success: #4ade80;
            --accent-warning: #fbbf24;
            --border-color: rgba(255, 255, 255, 0.2);
            --shadow-color: rgba(0, 0, 0, 0.3);
            --glow-color: #00d4ff;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden;
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(to bottom, #1e3c72, #2a5298);
            color: var(--text-primary);
            position: relative;
            user-select: none;
        }

        canvas {
            display: block;
        }

        /* --- Loading Screen --- */
        #loading-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s ease-out, visibility 0.5s;
        }
        #loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }
        .loading-helicopter {
            font-size: 80px;
            animation: loading-hover 1.5s ease-in-out infinite;
            margin-bottom: 30px;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
        }
        @keyframes loading-hover {
            0%, 100% { 
                transform: translateY(0) rotate(-5deg); 
            }
            50% { 
                transform: translateY(-20px) rotate(5deg); 
            }
        }
        .loading-text {
            font-size: 24px;
            color: white;
            margin-bottom: 30px;
            font-weight: 300;
            letter-spacing: 2px;
        }
        .loading-bar {
            width: 300px;
            height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
        }
        .loading-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #00ff88);
            width: 0%;
            transition: width 0.5s;
            box-shadow: 0 0 10px rgba(0,212,255,0.5);
        }

        /* --- HUD - 1960s Helicopter Instrument Panel (Subtler) --- */
        #hud-container {
            position: fixed;
            bottom: 10px; /* Lowered */
            left: 50%;
            transform: translateX(-50%) scale(0.9); /* Scaled down */
            z-index: 200;
            pointer-events: none;
            animation: slideUp 0.8s ease-out;
            transform-origin: bottom center;
        }
        @keyframes slideUp {
            from { transform: translateX(-50%) scale(0.9) translateY(100%); opacity: 0; }
            to { transform: translateX(-50%) scale(0.9) translateY(0); opacity: 1; }
        }
        .instrument-panel {
            background: linear-gradient(to bottom, #2a2a2a 0%, #1a1a1a 50%, #2a2a2a 100%);
            border: 2px solid #333; /* Thinner border */
            border-radius: 8px;
            padding: 10px 15px; /* Reduced padding */
            box-shadow: 
                inset 0 1px 3px rgba(0,0,0,0.7),
                inset 0 -1px 3px rgba(0,0,0,0.7),
                0 5px 20px rgba(0,0,0,0.5); /* Softened shadow */
            pointer-events: auto;
            display: flex;
            gap: 20px;
            align-items: center;
            position: relative;
        }
        .instrument-panel::before {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            height: 1px; /* Thinner line */
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
        }
        .instrument-panel::after {
            content: 'BELL UH-1';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 8px; /* Smaller font */
            color: #777;
            letter-spacing: 1.5px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }
        
        /* Analog Gauge Base */
        .gauge {
            width: 80px; /* Smaller */
            height: 80px; /* Smaller */
            background: radial-gradient(circle at 30% 30%, #3a3a3a, #1a1a1a);
            border-radius: 50%;
            border: 2px solid #444; /* Thinner border */
            box-shadow: 
                inset 0 2px 6px rgba(0,0,0,0.8),
                0 1px 3px rgba(0,0,0,0.5);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .gauge-face {
            width: 85%;
            height: 85%;
            border-radius: 50%;
            background: radial-gradient(circle, #f4f4f4, #d0d0d0);
            position: relative;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }
        .gauge-label {
            position: absolute;
            bottom: 18%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 8px;
            font-weight: bold;
            color: #222;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-family: 'Courier New', monospace;
        }
        .gauge-value {
            position: absolute;
            top: 62%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            font-weight: bold;
            color: #222;
            font-family: 'Courier New', monospace;
        }
        .gauge-marks {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        .gauge-mark {
            position: absolute;
            top: 4px;
            left: 50%;
            width: 1px;
            height: 6px;
            background: #555;
            transform-origin: bottom center;
        }
        .gauge-needle {
            position: absolute;
            width: 2px;
            height: 28px;
            background: linear-gradient(to bottom, #ff0000, #cc0000);
            left: 50%;
            top: 18%;
            transform-origin: bottom center;
            transform: translateX(-50%) rotate(0deg);
            transition: transform 0.3s ease-out;
            box-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            z-index: 10;
        }
        .gauge-needle::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: radial-gradient(circle, #666, #333);
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.5);
        }
        
        /* Altimeter Specific */
        .altimeter .gauge-needle {
            background: linear-gradient(to bottom, #000, #333);
        }
        
        /* Fuel Gauge Specific */
        .fuel-gauge .gauge-face {
            background: radial-gradient(circle, #f9f9f9, #e0e0e0);
        }
        .fuel-gauge.low-fuel .gauge-needle {
            background: linear-gradient(to bottom, #ff0000, #cc0000);
            animation: fuel-warning 0.5s infinite;
        }
        @keyframes fuel-warning {
            50% { opacity: 0.3; }
        }
        .fuel-gauge .gauge-zones {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            overflow: hidden;
        }
        .fuel-red-zone {
            position: absolute;
            width: 100%;
            height: 100%;
            background: conic-gradient(
                from 180deg,
                transparent 0deg,
                transparent 45deg,
                rgba(255,0,0,0.2) 45deg,
                rgba(255,0,0,0.2) 90deg,
                transparent 90deg
            );
        }
        
        /* Compass */
        .compass {
            width: 90px;
            height: 90px;
            background: radial-gradient(circle at 30% 30%, #3a3a3a, #1a1a1a);
            border-radius: 50%;
            border: 2px solid #444;
            box-shadow: 
                inset 0 3px 8px rgba(0,0,0,0.8),
                0 2px 4px rgba(0,0,0,0.5);
            position: relative;
        }
        .compass-face {
            width: 90%;
            height: 90%;
            position: absolute;
            top: 5%;
            left: 5%;
            border-radius: 50%;
            background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
        }
        .compass-rose {
            width: 80%;
            height: 80%;
            position: absolute;
            top: 10%;
            left: 10%;
            border-radius: 50%;
            background: radial-gradient(circle, #f0f0f0, #c0c0c0);
            transform: rotate(0deg);
            transition: transform 0.3s ease-out;
        }
        .compass-needle-main {
            position: absolute;
            width: 3px;
            height: 40%;
            background: linear-gradient(to bottom, #ff0000, #cc0000);
            left: 50%;
            top: 10%;
            transform: translateX(-50%);
            box-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        .compass-needle-main::after {
            content: 'N';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            color: #ff0000;
            font-weight: bold;
            font-size: 10px;
        }
        .compass-direction {
            position: absolute;
            font-size: 10px;
            font-weight: bold;
            color: #333;
            font-family: 'Courier New', monospace;
        }
        .compass-n { top: 6px; left: 50%; transform: translateX(-50%); }
        .compass-s { bottom: 6px; left: 50%; transform: translateX(-50%); }
        .compass-e { right: 6px; top: 50%; transform: translateY(-50%); }
        .compass-w { left: 6px; top: 50%; transform: translateY(-50%); }
        
        /* Mission Status Display */
        .mission-display {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 8px 12px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.8);
            display: flex;
            flex-direction: column;
            gap: 6px;
            min-width: 110px;
        }
        .mission-display-screen {
            background: linear-gradient(to bottom, #0a0a0a, #1a1a1a);
            border: 1px solid #222;
            padding: 6px;
            border-radius: 2px;
            font-family: 'Courier New', monospace;
            color: #0f0;
            font-size: 10px;
            text-shadow: 0 0 2px #0f0;
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.5);
        }
        .mission-label {
            color: #777;
            font-size: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 2px;
        }
        .mission-value {
            color: #0f0;
            font-weight: bold;
        }
        
        /* Warning Lights */
        .warning-lights {
            display: flex;
            gap: 8px;
            align-items: center;
            padding: 0 8px;
            border-left: 1px solid #333;
        }
        .warning-light {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #400, #200);
            border: 2px solid #222;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.5);
            position: relative;
        }
        .warning-light.active {
            background: radial-gradient(circle at 30% 30%, #f00, #a00);
            box-shadow: 
                inset 0 1px 3px rgba(0,0,0,0.5),
                0 0 8px rgba(255,0,0,0.5);
            animation: warning-blink 1s infinite;
        }
        @keyframes warning-blink {
            50% { opacity: 0.5; }
        }
        .warning-light::after {
            content: attr(data-label);
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 7px;
            color: #555;
            white-space: nowrap;
        }
        
        /* --- Mini Map --- */
        #mini-map {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 180px;
            height: 180px;
            background: var(--bg-panel);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 10px;
            box-shadow: 0 8px 32px var(--shadow-color);
            z-index: 250;
            animation: slideDown 0.5s ease-out;
        }
        #mini-map-canvas {
            width: 100%;
            height: 100%;
            border-radius: 8px;
            background: rgba(0,0,0,0.5);
        }
        
        /* --- Controls & Buttons --- */
        #controls-container {
            position: fixed;
            bottom: 30px;
            left: 30px;
            right: 30px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            z-index: 300;
            pointer-events: none;
        }
        .action-buttons {
            display: flex;
            gap: 20px;
            align-items: center;
            pointer-events: auto;
        }
        .action-button {
            width: 70px; 
            height: 70px;
            background: var(--bg-panel);
            backdrop-filter: blur(10px);
            border: 2px solid var(--border-color);
            border-radius: 50%;
            font-size: 28px; 
            font-weight: bold;
            color: var(--accent-primary);
            display: flex;
            justify-content: center; 
            align-items: center; 
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px var(--shadow-color);
            position: relative;
            overflow: hidden;
        }
        .action-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, var(--glow-color), transparent);
            transition: width 0.3s, height 0.3s;
            transform: translate(-50%, -50%);
        }
        .action-button:hover::before {
            width: 100%;
            height: 100%;
        }
        .action-button:hover {
            transform: scale(1.1);
            border-color: var(--accent-primary);
            box-shadow: 0 0 30px rgba(0,212,255,0.5);
        }
        .action-button:active { 
            transform: scale(0.95); 
        }
        #land-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
            display: none;
            font-size: 16px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(102,126,234,0.5); }
            50% { box-shadow: 0 0 40px rgba(102,126,234,0.8); }
        }
        #land-button.visible { display: flex; }
        
        #joystick-container {
            width: 150px;
            height: 150px;
            position: relative;
            pointer-events: auto;
        }
        #joystick-base {
            position: absolute;
            width: 100%;
            height: 100%;
            background: var(--bg-panel);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            border: 2px solid var(--border-color);
            box-shadow: inset 0 0 20px rgba(0,0,0,0.3);
        }
        #joystick-handle {
            position: absolute;
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            cursor: grab;
            transition: box-shadow 0.3s;
        }
        #joystick-handle.active {
            box-shadow: 0 0 30px rgba(0,212,255,0.8);
        }

        /* --- Menu --- */
        #menu-container {
            position: fixed; 
            top: 0; 
            right: -400px; 
            width: 100%; 
            max-width: 400px; 
            height: 100%;
            background: linear-gradient(to bottom, rgba(20,20,30,0.98), rgba(30,30,40,0.98));
            backdrop-filter: blur(20px);
            border-left: 1px solid var(--border-color);
            z-index: 400; 
            transition: right 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: flex; 
            flex-direction: column;
            box-shadow: -10px 0 40px rgba(0,0,0,0.5);
        }
        #menu-container.open { right: 0; }
        #menu-header { 
            padding: 25px; 
            border-bottom: 1px solid var(--border-color); 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            background: linear-gradient(135deg, rgba(102,126,234,0.2), rgba(118,75,162,0.2));
        }
        #menu-title { 
            font-size: 24px; 
            font-weight: bold;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        #menu-close { 
            background: none; 
            border: none; 
            font-size: 32px; 
            color: var(--text-secondary); 
            cursor: pointer; 
            transition: all 0.3s; 
        }
        #menu-close:hover { 
            color: var(--accent-primary); 
            transform: rotate(90deg); 
        }
        #menu-content { 
            flex: 1; 
            overflow-y: auto; 
            padding: 20px;
        }
        #menu-content::-webkit-scrollbar {
            width: 8px;
        }
        #menu-content::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
        }
        #menu-content::-webkit-scrollbar-thumb {
            background: var(--accent-primary);
            border-radius: 4px;
        }
        #poi-list { 
            display: flex; 
            flex-direction: column; 
            gap: 12px; 
        }
        .poi-item {
            border: 1px solid transparent;
            background: rgba(255,255,255,0.05);
            border-radius: 10px; 
            padding: 15px;
            cursor: pointer; 
            transition: all 0.3s ease;
            display: flex; 
            align-items: center; 
            gap: 15px;
            position: relative;
            overflow: hidden;
        }
        .poi-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0,212,255,0.2), transparent);
            transition: left 0.5s;
        }
        .poi-item:hover::before {
            left: 100%;
        }
        .poi-item:hover { 
            border-color: var(--accent-primary);
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }
        .poi-item.visited { 
            background: rgba(74,222,128,0.1);
            border-color: var(--accent-success);
        }
        .poi-item.visited .poi-item-name { 
            text-decoration: line-through; 
            opacity: 0.7;
        }
        .poi-item-id {
            font-size: 16px;
            font-weight: bold;
            color: var(--accent-primary);
            flex-shrink: 0;
            width: 30px;
            text-align: center;
            font-family: 'Orbitron', monospace;
        }
        .poi-item.visited .poi-item-id { 
            color: var(--accent-success); 
        }
        .poi-item-name { 
            flex: 1; 
            font-weight: normal; 
            font-size: 16px; 
        }
        .poi-item-distance {
            font-size: 12px;
            color: var(--text-secondary);
            font-family: 'Orbitron', monospace;
        }
        .poi-item-status {
            color: var(--accent-success);
            font-size: 28px;
            font-weight: bold;
        }
        .poi-item.fuel-station::after {
            content: '‚õΩ';
            position: absolute;
            right: 10px;
            top: 5px;
            font-size: 16px;
        }

        /* --- Modals --- */
        .modal {
            position: fixed; 
            inset: 0; 
            background: rgba(0,0,0,0.7);
            display: flex; 
            justify-content: center; 
            align-items: center;
            z-index: 500; 
            opacity: 0; 
            visibility: hidden;
            transition: all 0.3s ease; 
            backdrop-filter: blur(10px);
        }
        .modal.active { 
            opacity: 1; 
            visibility: visible; 
        }
        .modal-content {
            background: linear-gradient(135deg, rgba(20,20,30,0.98), rgba(30,30,40,0.98));
            padding: 35px; 
            border-radius: 20px; 
            width: 90%; 
            max-width: 600px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            transform: scale(0.8) rotateX(10deg); 
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 1px solid var(--border-color);
        }
        .modal.active .modal-content { 
            transform: scale(1) rotateX(0); 
        }
        .modal-header { 
            display: flex; 
            align-items: center; 
            gap: 20px; 
            margin-bottom: 20px; 
        }
        .modal-icon {
            width: 50px; 
            height: 50px; 
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 50%; 
            display: flex; 
            justify-content: center; 
            align-items: center;
            font-size: 24px; 
            font-weight: bold; 
            color: white;
            flex-shrink: 0;
            box-shadow: 0 0 30px rgba(0,212,255,0.5);
        }
        .modal.visited .modal-icon { 
            background: linear-gradient(135deg, var(--accent-success), #22c55e); 
        }
        .modal h2 { 
            flex: 1; 
            margin: 0; 
            font-size: 26px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .modal-description {
            color: var(--text-secondary); 
            line-height: 1.8; 
            font-size: 16px;
            margin-bottom: 30px; 
            max-height: 250px; 
            overflow-y: auto;
            padding-right: 10px;
        }
        .modal-description::-webkit-scrollbar {
            width: 6px;
        }
        .modal-description::-webkit-scrollbar-thumb {
            background: var(--accent-primary);
            border-radius: 3px;
        }
        .modal-buttons { 
            display: flex; 
            gap: 20px; 
            justify-content: flex-end; 
        }
        .modal-button {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            border: none; 
            padding: 12px 30px; 
            border-radius: 25px;
            font-size: 16px; 
            font-weight: bold; 
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0,212,255,0.3);
        }
        .modal-button:hover { 
            transform: translateY(-2px);
            box-shadow: 0 6px 30px rgba(0,212,255,0.5);
        }

        /* --- Achievement Toast --- */
        #achievement-toast {
            position: fixed;
            top: -200px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, rgba(102,126,234,0.95), rgba(118,75,162,0.95));
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
            z-index: 600;
            transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        #achievement-toast.show {
            top: 100px;
        }
        .achievement-icon {
            font-size: 48px;
            margin-bottom: 10px;
            animation: bounceIn 0.5s;
        }
        @keyframes bounceIn {
            0% { transform: scale(0); }
            60% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        .achievement-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .achievement-text {
            font-size: 14px;
            opacity: 0.9;
        }

        /* --- Weather Effects --- */
        .weather-indicator {
            position: absolute;
            bottom: 10px;
            right: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            font-size: 12px;
        }
        .weather-icon {
            font-size: 20px;
        }

        /* --- Responsive --- */
        @media (max-width: 768px) {
            #hud-container { 
                transform: translateX(-50%) scale(0.8); /* Further scale down on mobile */
            }
            #mini-map {
                width: 140px;
                height: 140px;
            }
            .action-button {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
            #joystick-container {
                width: 120px;
                height: 120px;
            }
            #achievement-toast.show { 
                top: 80px; 
                width: 90%; 
            }
        }
    </style>
</head>
<body>
    <div id="loading-screen">
        <div class="loading-helicopter">üöÅ</div>
        <div class="loading-text">Preparing Your Flight...</div>
        <div class="loading-bar"><div id="loading-bar-fill" class="loading-bar-fill"></div></div>
    </div>

    <div id="hud-container" style="display: none;">
        <div class="instrument-panel">
            <div class="gauge altimeter">
                <div class="gauge-face">
                    <div class="gauge-marks">
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(0deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(45deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(90deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(135deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(180deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(225deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(270deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(315deg);"></div>
                    </div>
                    <div class="gauge-needle" id="altitude-needle"></div>
                    <div class="gauge-label">ALT</div>
                    <div class="gauge-value" id="altitude">0m</div>
                </div>
            </div>
            
            <div class="gauge speed-indicator">
                <div class="gauge-face">
                    <div class="gauge-marks">
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(0deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(45deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(90deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(135deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(180deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(225deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(270deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(315deg);"></div>
                    </div>
                    <div class="gauge-needle" id="speed-needle"></div>
                    <div class="gauge-label">SPEED</div>
                    <div class="gauge-value" id="speed">0km/h</div>
                </div>
            </div>
            
            <div class="compass">
                <div class="compass-face"></div>
                <div class="compass-rose" id="compass-rose">
                    <div class="compass-needle-main"></div>
                    <span class="compass-direction compass-n">N</span>
                    <span class="compass-direction compass-s">S</span>
                    <span class="compass-direction compass-e">E</span>
                    <span class="compass-direction compass-w">W</span>
                </div>
            </div>
            
            <div class="gauge fuel-gauge" id="fuel-gauge">
                <div class="gauge-face">
                    <div class="gauge-zones">
                        <div class="fuel-red-zone"></div>
                    </div>
                    <div class="gauge-marks">
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(0deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(45deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(90deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(135deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(180deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(225deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(270deg);"></div>
                        <div class="gauge-mark" style="transform: translateX(-50%) rotate(315deg);"></div>
                    </div>
                    <div class="gauge-needle" id="fuel-needle"></div>
                    <div class="gauge-label">FUEL</div>
                    <div class="gauge-value" id="fuel">100%</div>
                </div>
            </div>
            
            <div class="mission-display">
                <div class="mission-display-screen">
                    <div class="mission-label">MISSION STATUS</div>
                    <div>POI: <span class="mission-value" id="visited">0/16</span></div>
                    <div>TIME: <span class="mission-value" id="flight-time">00:00</span></div>
                </div>
            </div>
            
            <div class="warning-lights">
                <div class="warning-light" id="low-fuel-light" data-label="FUEL"></div>
                <div class="warning-light" id="landing-light" data-label="LAND"></div>
            </div>
        </div>
    </div>

    <div id="mini-map" style="display: none;">
        <canvas id="mini-map-canvas"></canvas>
    </div>

    <div id="controls-container" style="display: none;">
        <div id="joystick-container">
            <div id="joystick-base"></div>
            <div id="joystick-handle"></div>
        </div>
        <div class="action-buttons">
             <button id="down-button" class="action-button">‚ñº</button>
             <button id="up-button" class="action-button">‚ñ≤</button>
             <button id="land-button" class="action-button">LAND</button>
             <button id="menu-toggle" class="action-button">‚ò∞</button>
        </div>
    </div>

    <div id="menu-container">
        <div id="menu-header">
            <h2 id="menu-title">Points of Interest</h2>
            <button id="menu-close">&times;</button>
        </div>
        <div id="menu-content">
            <div id="poi-list"></div>
        </div>
    </div>

    <div id="poi-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon"></div>
                <h2 id="info-title"></h2>
            </div>
            <p id="info-description"></p>
            <div class="modal-buttons">
                <button id="modal-close-button" class="modal-button">Continue Flying</button>
            </div>
        </div>
    </div>

    <div id="achievement-toast">
        <div class="achievement-icon" id="achievement-icon">üèÜ</div>
        <div class="achievement-title" id="achievement-title">Achievement Unlocked!</div>
        <div class="achievement-text" id="achievement-text">You discovered your first POI!</div>
    </div>

    <script>
        // ============= CONFIGURATION =============
        const CONFIG = {
            MOVEMENT_SPEED: 35,
            TURN_SPEED: 1.8,
            CLIMB_SPEED: 22,
            CAMERA_DISTANCE: 35,
            CAMERA_HEIGHT: 18,
            LANDING_DISTANCE: 15,
            LANDING_HEIGHT: 10,
            MAP_SIZE: 500,
            FUEL_CONSUMPTION_RATE: 0.02,
            FUEL_STATION_REFILL_RATE: 2,
            PARTICLE_COUNT: 200,
            CLOUD_COUNT: 15
        };

        // ============= POI DATA =============
        const POI_DATA = [
            { id: 1, name: "Stadt und Burg Ziesar", x: -180, z: -190, visited: false, description: "Auf der Burg Ziesar befindet sich das Museum f√ºr brandenburgische Kirchen- und Kulturgeschichte des Mittelalters. Der sehr gut erhaltene Burgfried und die Schlosskapelle bieten einen weiten Blick √ºber den Ziesarer Kiez.", type: "castle" },
            { id: 2, name: "Gutspark Dahlen", x: -80, z: -150, visited: false, description: "Der Gutspark Dahlen ist ein Waldst√ºck seltener botanischer Kunst. Spazierg√§nge um den Schwanensee verzaubern die Besucher. Der Bauerngarten mit Kultur- und Duftpflanzen kann besucht werden.", type: "park" },
            { id: 3, name: "Klein Briesener Bach", x: 20, z: -170, visited: false, description: "Der Artesische Brunnen im Naturschutzgebiet Klein Briesener Bach - hier steigt das Wasser nur durch den Erd-Eigendruck hervor und wird durch eine Rinne dem Briesenflie√ü zugef√ºhrt.", type: "nature" },
            { id: 4, name: "Paradies Dippmannsdorf", x: 140, z: -160, visited: false, description: "Aus einigen Dutzend Quellen sprudelt glasklares Wasser, das die M√ºhlenb√§che speist. Der aus Buchen, Eichen und Birken bestehende Quellkopf wurde begehbar erschlossen.", type: "nature" },
            { id: 5, name: "T√∂pferort G√∂rzke", x: -185, z: -80, visited: false, description: "Ein Besuch der kleinen Museen und des Handwerkerhofs, ein Bummel entlang der Bauernh√∂fe und Einkaufsm√∂glichkeiten in f√ºnf T√∂pfereien erwarten die Besucher des Fl√§mingdorfes.", type: "village" },
            { id: 6, name: "Hagelberg", x: 15, z: -20, visited: false, description: "Der Hagelberg, ein echter 'Zweitausender' (200,3m), l√§dt zum Eintrag ins Gipfelbuch ein. F√ºr den 'Aufstieg' zum Gipfelkreuz wird man mit einem sch√∂nen Blick √ºber die Fl√§minglandschaft belohnt.", type: "mountain" },
            { id: 7, name: "Bad Belzig mit Burg Eisenhardt", x: 145, z: -50, visited: false, description: "Auf der komplett erhaltenen Burg kann die 1000-j√§hrige Geschichte der Stadt hautnah erkundet werden. Vom Butterturm bietet sich der sch√∂nste Ausblick auf Stadt und Urstromtal.", type: "castle", isFuelStation: true },
            { id: 8, name: "Aussichtspunkt Belziger Landschaftswiesen", x: 200, z: -70, visited: false, description: "Am Burgenwanderweg gelegen, bietet sich ein eindrucksvoller Blick in das Niederungsgebiet - eines der wichtigsten Vogelschutzgebiete Brandenburgs mit Gro√ütrappen.", type: "viewpoint" },
            { id: 9, name: "Wiesenburg mit Schloss und Park", x: -85, z: 20, visited: false, description: "Das Schloss erhebt sich majest√§tisch √ºber dem Ort. Der als Landschaftspark gestaltete Schlosspark ist der bedeutendste seiner Art im Hohen Fl√§ming und l√§dt zum ausgiebigen Spazieren ein.", type: "castle" },
            { id: 10, name: "Naturparkzentrum Hoher Fl√§ming", x: 40, z: 150, visited: false, description: "Das Besucherinformationszentrum ist zentrale Anlaufstelle f√ºr alle G√§ste. Hier erh√§lt man die besten Tipps f√ºr Ausfl√ºge, kann Fahrr√§der ausleihen und die Naturparkausstellung besuchen.", type: "center", isFuelStation: true },
            { id: 11, name: "Raben mit Burg Rabenstein", x: 30, z: 140, visited: false, description: "Auf einem H√ºgel gelegen thront die s√ºdlichste der Fl√§mingburgen, die Burg Rabenstein. Von hier f√ºhrt ein Naturlehrpfad durch das Naturschutzgebiet Rabenstein hinunter ins Dorf.", type: "castle" },
            { id: 12, name: "Niemegk", x: 210, z: 70, visited: false, description: "Das St√§dtchen Niemegk mit seinem alten Rathaus pr√§gt das Stadtbild. Vom Kirchturm bietet sich ein sch√∂ner Ausblick auf die Hauptkette des Fl√§mings.", type: "town" },
            { id: 13, name: "Fl√§mingbuchen", x: -140, z: 90, visited: false, description: "In dem gro√üen Waldgebiet der Brandenheide sind einige Inseln aus Buchen zu finden, wie in den Naturschutzgebieten 'Fl√§mingbuchen' und 'Spring'.", type: "nature" },
            { id: 14, name: "Brautrummel mit Riesenstein", x: 25, z: 35, visited: false, description: "Die Sage erz√§hlt, wie ein junges Brautpaar nach einem Gewitterregen in der Rummel ertrank. Heute kann man auf einer Rundwanderung zum Riesenstein die besondere Natur erleben.", type: "nature" },
            { id: 15, name: "Neuendorfer Rummel", x: 150, z: 140, visited: false, description: "Die Rummeln - verzweigte, enge Trockent√§ler - entstanden nach dem Abtauen der Gletscher. Wie gr√ºne Finger stechen sie sich weit in die Agrarlandschaft hinein.", type: "nature" },
            { id: 16, name: "Garrey mit Aussichtsplattform", x: 180, z: 160, visited: false, description: "Die Landschaft rings um Garrey bietet fantastische Ausblicke. Eine Aussichtsplattform kr√∂nt das restaurierte alte Wasserwerk, in dem sich eine kleine Ausstellung befindet.", type: "viewpoint" }
        ];

        // ============= GAME STATE =============
        const gameState = {
            keys: {},
            touch: {
                joystick: { x: 0, y: 0, active: false },
                up: false,
                down: false
            },
            velocity: new THREE.Vector3(),
            altitude: 10,
            speed: 0,
            fuel: 100,
            visitedCount: 0,
            nearPOI: null,
            gamePaused: false,
            startTime: Date.now(),
            achievements: {
                firstPOI: false,
                halfPOIs: false,
                allPOIs: false,
                highFlyer: false,
                speedDemon: false
            },
            weather: 'clear',
            windForce: new THREE.Vector3()
        };

        // ============= DOM ELEMENTS =============
        const DOMElements = {
            loadingScreen: document.getElementById('loading-screen'),
            loadingBarFill: document.getElementById('loading-bar-fill'),
            hud: document.getElementById('hud-container'),
            controls: document.getElementById('controls-container'),
            altitude: document.getElementById('altitude'),
            speed: document.getElementById('speed'),
            fuel: document.getElementById('fuel'),
            visited: document.getElementById('visited'),
            flightTime: document.getElementById('flight-time'),
            altitudeNeedle: document.getElementById('altitude-needle'),
            speedNeedle: document.getElementById('speed-needle'),
            fuelNeedle: document.getElementById('fuel-needle'),
            fuelGauge: document.getElementById('fuel-gauge'),
            compassRose: document.getElementById('compass-rose'),
            lowFuelLight: document.getElementById('low-fuel-light'),
            landingLight: document.getElementById('landing-light'),
            landButton: document.getElementById('land-button'),
            upButton: document.getElementById('up-button'),
            downButton: document.getElementById('down-button'),
            menuToggle: document.getElementById('menu-toggle'),
            menuContainer: document.getElementById('menu-container'),
            menuClose: document.getElementById('menu-close'),
            poiList: document.getElementById('poi-list'),
            poiModal: document.getElementById('poi-modal'),
            modalTitle: document.getElementById('info-title'),
            modalDescription: document.getElementById('info-description'),
            modalCloseButton: document.getElementById('modal-close-button'),
            achievementToast: document.getElementById('achievement-toast'),
            achievementIcon: document.getElementById('achievement-icon'),
            achievementTitle: document.getElementById('achievement-title'),
            achievementText: document.getElementById('achievement-text'),
            joystick: document.getElementById('joystick-container'),
            joystickHandle: document.getElementById('joystick-handle'),
            miniMap: document.getElementById('mini-map'),
            miniMapCanvas: document.getElementById('mini-map-canvas')
        };

        // ============= SCENE SETUP =============
        const scene = new THREE.Scene();
        const FOG_COLOR = 0x87CEEB;
        scene.fog = new THREE.Fog(FOG_COLOR, 150, 450);
        
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
        
        const renderer = new THREE.WebGLRenderer({ antialias: true, powerPreference: "high-performance" });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        renderer.outputColorSpace = THREE.SRGBColorSpace;
        document.body.appendChild(renderer.domElement);

        // ============= LIGHTING =============
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 1.0);
        directionalLight.position.set(100, 100, 50);
        directionalLight.castShadow = true;
        directionalLight.shadow.mapSize.width = 2048;
        directionalLight.shadow.mapSize.height = 2048;
        directionalLight.shadow.camera.left = -300;
        directionalLight.shadow.camera.right = 300;
        directionalLight.shadow.camera.top = 300;
        directionalLight.shadow.camera.bottom = -300;
        scene.add(directionalLight);
        
        // ============= LOADERS =============
        const loadingManager = new THREE.LoadingManager();
        const cubeTextureLoader = new THREE.CubeTextureLoader(loadingManager);
        const textureLoader = new THREE.TextureLoader(loadingManager);

        // ============= SKYBOX =============
        const skyboxTexture = cubeTextureLoader.load([
            'https://threejs.org/examples/textures/cube/skyboxsun25deg/px.jpg',
            'https://threejs.org/examples/textures/cube/skyboxsun25deg/nx.jpg',
            'https://threejs.org/examples/textures/cube/skyboxsun25deg/py.jpg',
            'https://threejs.org/examples/textures/cube/skyboxsun25deg/ny.jpg',
            'https://threejs.org/examples/textures/cube/skyboxsun25deg/pz.jpg',
            'https://threejs.org/examples/textures/cube/skyboxsun25deg/nz.jpg',
        ]);
        scene.background = skyboxTexture;

        // ============= TERRAIN =============
        const terrainGeometry = new THREE.PlaneGeometry(CONFIG.MAP_SIZE, CONFIG.MAP_SIZE, 100, 100);
        
        const mapUrl = 'https://raw.githubusercontent.com/Mikieb1982/Hoher-Flaeming-Helicopter-Ride/main/images/map.jpg';
        
        textureLoader.load(mapUrl,
            (texture) => {
                const terrainMaterial = new THREE.MeshStandardMaterial({ map: texture, side: THREE.DoubleSide });
                const terrain = new THREE.Mesh(terrainGeometry, terrainMaterial);
                terrain.rotation.x = -Math.PI / 2;
                terrain.receiveShadow = true;
                scene.add(terrain);
            },
            undefined,
            (error) => {
                console.error('Map image could not be loaded.', error);
                const terrainMaterial = new THREE.MeshStandardMaterial({ color: 0x3a8b3a, side: THREE.DoubleSide });
                const terrain = new THREE.Mesh(terrainGeometry, terrainMaterial);
                terrain.rotation.x = -Math.PI / 2;
                terrain.receiveShadow = true;
                scene.add(terrain);
            }
        );

        // ============= CLOUDS =============
        const cloudGroup = new THREE.Group();
        const cloudMaterial = new THREE.MeshPhongMaterial({ 
            color: 0xffffff, 
            transparent: true, 
            opacity: 0.7 
        });
        
        for (let i = 0; i < CONFIG.CLOUD_COUNT; i++) {
            const cloud = new THREE.Group();
            
            for (let j = 0; j < 4; j++) {
                const sphere = new THREE.Mesh(
                    new THREE.SphereGeometry(Math.random() * 15 + 10, 8, 6),
                    cloudMaterial
                );
                sphere.position.set(
                    Math.random() * 30 - 15,
                    Math.random() * 10,
                    Math.random() * 30 - 15
                );
                cloud.add(sphere);
            }
            
            cloud.position.set(
                Math.random() * CONFIG.MAP_SIZE - CONFIG.MAP_SIZE/2,
                Math.random() * 50 + 100,
                Math.random() * CONFIG.MAP_SIZE - CONFIG.MAP_SIZE/2
            );
            cloud.userData = { speed: Math.random() * 0.5 + 0.1 };
            cloudGroup.add(cloud);
        }
        scene.add(cloudGroup);

        // ============= HELICOPTER =============
        const helicopter = new THREE.Group();
        const bodyMaterial = new THREE.MeshStandardMaterial({ color: 0xdc3545, metalness: 0.4, roughness: 0.5 });
        const body = new THREE.Mesh(new THREE.BoxGeometry(2, 1.5, 4), bodyMaterial);
        body.position.y = 0.75;
        body.castShadow = true;
        helicopter.add(body);

        const cockpitMaterial = new THREE.MeshStandardMaterial({ color: 0xadd8e6, opacity: 0.5, transparent: true, metalness: 0.1, roughness: 0.2 });
        const cockpit = new THREE.Mesh(new THREE.SphereGeometry(1, 16, 12), cockpitMaterial);
        cockpit.position.set(0, 1, 1.5);
        cockpit.scale.set(0.9, 0.7, 1.2);
        helicopter.add(cockpit);

        const tail = new THREE.Mesh(new THREE.CylinderGeometry(0.15, 0.4, 3), bodyMaterial);
        tail.position.set(0, 0.6, -3);
        tail.rotation.x = Math.PI / 2;
        tail.castShadow = true;
        helicopter.add(tail);

        const rotorMaterial = new THREE.MeshStandardMaterial({ color: 0x666666, metalness: 0.8, roughness: 0.5 });
        const mainRotorGroup = new THREE.Group();
        const mainRotor = new THREE.Mesh(new THREE.BoxGeometry(10, 0.1, 0.4), rotorMaterial);
        mainRotorGroup.add(mainRotor);
        const mainRotor2 = mainRotor.clone();
        mainRotor2.rotation.y = Math.PI / 2;
        mainRotorGroup.add(mainRotor2);
        mainRotorGroup.position.y = 2;
        helicopter.add(mainRotorGroup);

        const tailRotorGroup = new THREE.Group();
        const tailRotor = new THREE.Mesh(new THREE.BoxGeometry(0.1, 1.5, 0.1), rotorMaterial);
        tailRotorGroup.add(tailRotor);
        tailRotorGroup.position.set(0.3, 0.6, -4.5);
        helicopter.add(tailRotorGroup);
        
        helicopter.position.set(145, 10, -50); // Start at Bad Belzig
        scene.add(helicopter);

        // ============= POI MARKERS =============
        const poiMeshes = [];
        const unvisitedFlagMaterial = new THREE.MeshStandardMaterial({ color: 0xffc107, side: THREE.DoubleSide, emissive: 0xffc107, emissiveIntensity: 0 });
        const visitedFlagMaterial = new THREE.MeshStandardMaterial({ color: 0x28a745, side: THREE.DoubleSide });

        POI_DATA.forEach(poi => {
            const group = new THREE.Group();
            
            const platform = new THREE.Mesh(
                new THREE.CylinderGeometry(5, 5, 0.5, 16),
                new THREE.MeshStandardMaterial({ color: poi.isFuelStation ? 0xff0000 : 0xcccccc })
            );
            platform.receiveShadow = true;
            group.add(platform);

            const pole = new THREE.Mesh(
                new THREE.CylinderGeometry(0.2, 0.2, 10),
                new THREE.MeshStandardMaterial({ color: 0x666666 })
            );
            pole.position.y = 5;
            pole.castShadow = true;
            group.add(pole);

            const flag = new THREE.Mesh(new THREE.PlaneGeometry(4, 3), unvisitedFlagMaterial.clone());
            flag.position.set(2, 9, 0);
            group.add(flag);
            
            group.position.set(poi.x, 0.25, poi.z);
            group.userData = { poi: poi, flag: flag };
            scene.add(group);
            poiMeshes.push(group);
        });

        // ============= MINI MAP =============
        const miniMapCtx = DOMElements.miniMapCanvas.getContext('2d');
        const miniMapSize = 160;
        DOMElements.miniMapCanvas.width = miniMapSize;
        DOMElements.miniMapCanvas.height = miniMapSize;

        function updateMiniMap() {
            miniMapCtx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            miniMapCtx.fillRect(0, 0, miniMapSize, miniMapSize);
            
            // Draw POIs
            POI_DATA.forEach(poi => {
                const x = (poi.x / CONFIG.MAP_SIZE + 0.5) * miniMapSize;
                const y = (poi.z / CONFIG.MAP_SIZE + 0.5) * miniMapSize;
                
                miniMapCtx.fillStyle = poi.visited ? '#4ade80' : (poi.isFuelStation ? '#ff6b6b' : '#ffc107');
                miniMapCtx.beginPath();
                miniMapCtx.arc(x, y, 3, 0, Math.PI * 2);
                miniMapCtx.fill();
            });
            
            // Draw helicopter
            const hx = (helicopter.position.x / CONFIG.MAP_SIZE + 0.5) * miniMapSize;
            const hy = (helicopter.position.z / CONFIG.MAP_SIZE + 0.5) * miniMapSize;
            
            miniMapCtx.save();
            miniMapCtx.translate(hx, hy);
            miniMapCtx.rotate(-helicopter.rotation.y - Math.PI/2);
            miniMapCtx.fillStyle = '#00d4ff';
            miniMapCtx.beginPath();
            miniMapCtx.moveTo(0, -5);
            miniMapCtx.lineTo(-3, 5);
            miniMapCtx.lineTo(3, 5);
            miniMapCtx.closePath();
            miniMapCtx.fill();
            miniMapCtx.restore();
        }

        // ============= EVENT LISTENERS =============
        const setupEventListeners = () => {
            // Keyboard
            document.addEventListener('keydown', (e) => {
                if (gameState.gamePaused) return;
                const key = e.key.toLowerCase();
                if (key === 'arrowup' || key === 'w') gameState.keys['forward'] = true;
                if (key === 'arrowdown' || key === 's') gameState.keys['backward'] = true;
                if (key === 'arrowleft' || key === 'a') gameState.keys['left'] = true;
                if (key === 'arrowright' || key === 'd') gameState.keys['right'] = true;
                if (key === ' ') { gameState.keys['up'] = true; e.preventDefault(); }
                if (key === 'shift') gameState.keys['down'] = true;
                if (key === 'l') handleLanding();
            });
            document.addEventListener('keyup', (e) => {
                const key = e.key.toLowerCase();
                if (key === 'arrowup' || key === 'w') gameState.keys['forward'] = false;
                if (key === 'arrowdown' || key === 's') gameState.keys['backward'] = false;
                if (key === 'arrowleft' || key === 'a') gameState.keys['left'] = false;
                if (key === 'arrowright' || key === 'd') gameState.keys['right'] = false;
                if (key === ' ') gameState.keys['up'] = false;
                if (key === 'shift') gameState.keys['down'] = false;
            });

            // Touch - Joystick
            const joystick = DOMElements.joystick;
            const handle = DOMElements.joystickHandle;
            const maxJoystickDist = 75;

            joystick.addEventListener('touchstart', (e) => {
                gameState.touch.joystick.active = true;
                handle.classList.add('active');
                updateJoystick(e.touches[0]);
                e.preventDefault();
            });
            joystick.addEventListener('touchmove', (e) => {
                if (gameState.touch.joystick.active) {
                    updateJoystick(e.touches[0]);
                }
                e.preventDefault();
            });
            joystick.addEventListener('touchend', (e) => {
                gameState.touch.joystick.active = false;
                gameState.touch.joystick.x = 0;
                gameState.touch.joystick.y = 0;
                handle.classList.remove('active');
                handle.style.transform = `translate(-50%, -50%)`;
            });

            function updateJoystick(touch) {
                const rect = joystick.getBoundingClientRect();
                let x = touch.clientX - rect.left - 75;
                let y = touch.clientY - rect.top - 75;
                const dist = Math.sqrt(x*x + y*y);

                if (dist > maxJoystickDist) {
                    x = (x / dist) * maxJoystickDist;
                    y = (y / dist) * maxJoystickDist;
                }

                handle.style.transform = `translate(calc(-50% + ${x}px), calc(-50% + ${y}px))`;
                gameState.touch.joystick.x = x / maxJoystickDist;
                gameState.touch.joystick.y = y / maxJoystickDist;
            }

            // Touch - Buttons
            DOMElements.upButton.addEventListener('touchstart', (e) => { gameState.touch.up = true; e.preventDefault(); });
            DOMElements.upButton.addEventListener('touchend', (e) => { gameState.touch.up = false; });
            DOMElements.downButton.addEventListener('touchstart', (e) => { gameState.touch.down = true; e.preventDefault(); });
            DOMElements.downButton.addEventListener('touchend', (e) => { gameState.touch.down = false; });
            
            // General
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });

            // UI Listeners
            DOMElements.landButton.addEventListener('click', handleLanding);
            DOMElements.menuToggle.addEventListener('click', () => DOMElements.menuContainer.classList.add('open'));
            DOMElements.menuClose.addEventListener('click', () => DOMElements.menuContainer.classList.remove('open'));
            DOMElements.modalCloseButton.addEventListener('click', closeInfoPanel);
        };
        
        // ============= UPDATE FUNCTIONS =============
        function updateHelicopter(delta) {
            // Combine keyboard and touch inputs
            let thrustInput = -gameState.touch.joystick.y;
            let turnInput = -gameState.touch.joystick.x;
            let climbInput = (gameState.touch.up ? 1 : 0) - (gameState.touch.down ? 1 : 0);

            if (gameState.keys['forward']) thrustInput = 1;
            if (gameState.keys['backward']) thrustInput = -0.5;
            if (gameState.keys['left']) turnInput = 1;
            if (gameState.keys['right']) turnInput = -1;
            if (gameState.keys['up']) climbInput = 1;
            if (gameState.keys['down']) climbInput = -1;

            // Apply movement
            let thrust = thrustInput * CONFIG.MOVEMENT_SPEED;
            let turn = turnInput * CONFIG.TURN_SPEED;
            let climb = climbInput * CONFIG.CLIMB_SPEED;
            
            helicopter.rotation.y += turn * delta;
            
            const forward = new THREE.Vector3(0, 0, 1);
            forward.applyQuaternion(helicopter.quaternion);
            gameState.velocity.add(forward.multiplyScalar(-thrust * delta));
            
            gameState.velocity.y += climb * delta;
            
            // Add wind effect
            gameState.velocity.add(gameState.windForce.clone().multiplyScalar(delta));
            
            gameState.velocity.multiplyScalar(0.96); // Drag
            
            helicopter.position.add(gameState.velocity.clone().multiplyScalar(delta));
            
            // Altitude limits
            if (helicopter.position.y < 1) { helicopter.position.y = 1; gameState.velocity.y = 0; }
            if (helicopter.position.y > 200) { helicopter.position.y = 200; gameState.velocity.y = 0; }
            
            // Boundary limits
            const boundary = CONFIG.MAP_SIZE / 2;
            helicopter.position.x = Math.max(-boundary, Math.min(boundary, helicopter.position.x));
            helicopter.position.z = Math.max(-boundary, Math.min(boundary, helicopter.position.z));
            
            // Update state
            gameState.altitude = helicopter.position.y;
            gameState.speed = Math.sqrt(gameState.velocity.x ** 2 + gameState.velocity.z ** 2) * 10;
            
            // Consume fuel
            if (gameState.speed > 0 || Math.abs(climbInput) > 0) {
                gameState.fuel -= CONFIG.FUEL_CONSUMPTION_RATE * delta;
                gameState.fuel = Math.max(0, gameState.fuel);
                
                if (gameState.fuel === 0) {
                    gameState.velocity.y = Math.max(gameState.velocity.y - 10 * delta, -20);
                }
            }
            
            // Helicopter tilt effects
            helicopter.rotation.z = -turn * 0.3 - gameState.velocity.x * 0.01;
            helicopter.rotation.x = thrustInput * 0.2 - gameState.velocity.z * 0.01;
            
            // Rotate rotors
            mainRotorGroup.rotation.y += delta * 30;
            tailRotorGroup.rotation.x += delta * 40;
            
            // Check achievements
            checkAchievements();
        }
        
        function updateCamera() {
            const offset = new THREE.Vector3(0, CONFIG.CAMERA_HEIGHT, CONFIG.CAMERA_DISTANCE);
            offset.applyQuaternion(helicopter.quaternion);
            const targetPosition = helicopter.position.clone().add(offset);
            camera.position.lerp(targetPosition, 0.1);
            camera.lookAt(helicopter.position);
        }
        
        function updateClouds(delta) {
            cloudGroup.children.forEach(cloud => {
                cloud.position.x += cloud.userData.speed * delta * 10;
                if (cloud.position.x > CONFIG.MAP_SIZE/2) {
                    cloud.position.x = -CONFIG.MAP_SIZE/2;
                }
            });
        }
        
        function updateWeather() {
            const time = Date.now() * 0.0001;
            gameState.windForce.x = Math.sin(time) * 2;
            gameState.windForce.z = Math.cos(time * 0.7) * 2;
        }
        
        function checkPOIs() {
            gameState.nearPOI = null;
            let closestDist = Infinity;

            poiMeshes.forEach(mesh => {
                const poi = mesh.userData.poi;
                
                const distance = helicopter.position.distanceTo(mesh.position);
                
                // Check for fuel station refill
                if (poi.isFuelStation && distance < CONFIG.LANDING_DISTANCE && helicopter.position.y < CONFIG.LANDING_HEIGHT) {
                    gameState.fuel = Math.min(100, gameState.fuel + CONFIG.FUEL_STATION_REFILL_RATE * 0.016);
                }
                
                if (poi.visited) {
                    mesh.userData.flag.material.emissiveIntensity = 0;
                    return;
                }

                if (distance < CONFIG.LANDING_DISTANCE && helicopter.position.y < CONFIG.LANDING_HEIGHT) {
                    if (distance < closestDist) {
                        gameState.nearPOI = poi;
                        closestDist = distance;
                    }
                }
                
                // Pulsing effect for nearby POIs
                if (distance < CONFIG.LANDING_DISTANCE * 2) {
                    const pulse = (Math.sin(Date.now() * 0.005) + 1) / 4;
                    mesh.userData.flag.material.emissiveIntensity = pulse;
                } else {
                    mesh.userData.flag.material.emissiveIntensity = 0;
                }
            });
            
            DOMElements.landButton.classList.toggle('visible', !!gameState.nearPOI);
        }
        
        function handleLanding() {
            if (gameState.nearPOI) {
                const poi = gameState.nearPOI;
                poi.visited = true;
                gameState.visitedCount++;
                
                const poiMesh = poiMeshes.find(m => m.userData.poi.id === poi.id);
                if (poiMesh) {
                    poiMesh.userData.flag.material = visitedFlagMaterial.clone();
                }
                
                updatePOIList();
                showInfoPanel(poi);
                
                // Check achievements
                if (gameState.visitedCount === 1 && !gameState.achievements.firstPOI) {
                    gameState.achievements.firstPOI = true;
                    showAchievement('üéØ', 'First Discovery!', 'You found your first POI');
                } else if (gameState.visitedCount === 8 && !gameState.achievements.halfPOIs) {
                    gameState.achievements.halfPOIs = true;
                    showAchievement('üåü', 'Halfway There!', 'You discovered half of all POIs');
                } else if (gameState.visitedCount === POI_DATA.length && !gameState.achievements.allPOIs) {
                    gameState.achievements.allPOIs = true;
                    showAchievement('üèÜ', 'Master Explorer!', 'All POIs discovered!');
                }
            }
        }
        
        function checkAchievements() {
            if (gameState.altitude > 150 && !gameState.achievements.highFlyer) {
                gameState.achievements.highFlyer = true;
                showAchievement('ü¶Ö', 'High Flyer!', 'Reached 150m altitude');
            }
            if (gameState.speed > 80 && !gameState.achievements.speedDemon) {
                gameState.achievements.speedDemon = true;
                showAchievement('üí®', 'Speed Demon!', 'Exceeded 80 km/h');
            }
        }

        function updateHUD() {
            // Update text values
            DOMElements.altitude.textContent = `${Math.round(gameState.altitude)}m`;
            DOMElements.speed.textContent = `${Math.round(gameState.speed)}km/h`;
            DOMElements.fuel.textContent = `${Math.round(gameState.fuel)}%`;
            DOMElements.visited.textContent = `${gameState.visitedCount}/${POI_DATA.length}`;
            
            // Update altitude needle (0-200m range, -135 to +135 degrees)
            const altAngle = (gameState.altitude / 200) * 270 - 135;
            DOMElements.altitudeNeedle.style.transform = `translateX(-50%) rotate(${altAngle}deg)`;
            
            // Update speed needle (0-100km/h range, -135 to +135 degrees)
            const speedAngle = (gameState.speed / 100) * 270 - 135;
            DOMElements.speedNeedle.style.transform = `translateX(-50%) rotate(${speedAngle}deg)`;
            
            // Update fuel needle (0-100% range, -135 to +135 degrees)
            const fuelAngle = (gameState.fuel / 100) * 270 - 135;
            DOMElements.fuelNeedle.style.transform = `translateX(-50%) rotate(${fuelAngle}deg)`;
            
            // Update fuel warning
            if (gameState.fuel < 20) {
                DOMElements.fuelGauge.classList.add('low-fuel');
                DOMElements.lowFuelLight.classList.add('active');
            } else {
                DOMElements.fuelGauge.classList.remove('low-fuel');
                DOMElements.lowFuelLight.classList.remove('active');
            }
            
            // Update landing light
            if (gameState.nearPOI) {
                DOMElements.landingLight.classList.add('active');
            } else {
                DOMElements.landingLight.classList.remove('active');
            }
            
            // Update flight time
            const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            DOMElements.flightTime.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Update compass (rotate the entire rose)
            const angle = -helicopter.rotation.y * (180 / Math.PI);
            DOMElements.compassRose.style.transform = `rotate(${angle}deg)`;
        }
        
        function updatePOIList() {
            DOMElements.poiList.innerHTML = '';
            POI_DATA.forEach(poi => {
                const div = document.createElement('div');
                div.className = 'poi-item' + (poi.visited ? ' visited' : '') + (poi.isFuelStation ? ' fuel-station' : '');
                
                const distance = Math.round(helicopter.position.distanceTo(new THREE.Vector3(poi.x, 0, poi.z)));
                
                div.innerHTML = `
                    <div class="poi-item-id">${poi.id}</div>
                    <div class="poi-item-name">${poi.name}</div>
                    <div class="poi-item-distance">${distance}m</div>
                    ${poi.visited ? '<div class="poi-item-status">‚úì</div>' : ''}
                `;
                div.onclick = () => {
                    const poiMesh = poiMeshes.find(m => m.userData.poi.id === poi.id);
                    if (poiMesh) {
                        camera.lookAt(poiMesh.position);
                        DOMElements.menuContainer.classList.remove('open');
                    }
                };
                DOMElements.poiList.appendChild(div);
            });
        }
        
        let achievementTimeout;
        function showAchievement(icon, title, text) {
            DOMElements.achievementIcon.textContent = icon;
            DOMElements.achievementTitle.textContent = title;
            DOMElements.achievementText.textContent = text;
            DOMElements.achievementToast.classList.add('show');
            
            clearTimeout(achievementTimeout);
            achievementTimeout = setTimeout(() => {
                DOMElements.achievementToast.classList.remove('show');
            }, 4000);
        }
        
        function showInfoPanel(poi) {
            gameState.gamePaused = true;
            DOMElements.modalTitle.textContent = `${poi.id}. ${poi.name}`;
            DOMElements.modalDescription.textContent = poi.description;
            DOMElements.poiModal.classList.add('active');
            DOMElements.poiModal.classList.toggle('visited', poi.visited);
            const icon = DOMElements.poiModal.querySelector('.modal-icon');
            icon.textContent = poi.visited ? '‚úì' : poi.id;
        }
        
        function closeInfoPanel() {
            gameState.gamePaused = false;
            DOMElements.poiModal.classList.remove('active');
        }

        // ============= GAME LOOP =============
        const clock = new THREE.Clock();
        function animate() {
            requestAnimationFrame(animate);
            const delta = clock.getDelta();
            
            if (!gameState.gamePaused) {
                updateHelicopter(delta);
                updateClouds(delta);
                updateWeather();
                checkPOIs();
            }
            updateCamera();
            updateHUD();
            updateMiniMap();
            
            renderer.render(scene, camera);
        }

        // ============= INITIALIZATION =============
        function init() {
            DOMElements.loadingScreen.classList.add('hidden');
            DOMElements.hud.style.display = 'flex';
            DOMElements.controls.style.display = 'flex';
            DOMElements.miniMap.style.display = 'block';
            
            updatePOIList();
            setupEventListeners();
            
            showAchievement('üöÅ', 'Welcome!', 'Explore Hoher Fl√§ming from above');
            
            animate();
        }

        loadingManager.onProgress = (url, itemsLoaded, itemsTotal) => {
            const progress = itemsLoaded / itemsTotal;
            DOMElements.loadingBarFill.style.width = `${progress * 100}%`;
        };
        loadingManager.onLoad = () => {
            setTimeout(init, 500);
        };
    </script>
</body>
</html>
```

\<br\>

### Alternative minimalist HUD

For a more minimalist look, you can replace the `instrument-panel` style with this one, which uses a sleeker, dark theme inspired by modern sci-fi interfaces.

\<br\>

**index.css**

```css
/* Reset and Variables */
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

:root {
    --bg-main: #111;
    --bg-panel: rgba(0, 20, 40, 0.75);
    --text-primary: #e0f0ff;
    --text-secondary: #80a0c0;
    --accent-primary: #00ffff;
    --accent-secondary: #ff00ff;
    --accent-success: #00ff80;
    --border-color: rgba(0, 255, 255, 0.3);
    --shadow-sm: 0 2px 4px rgba(0,0,0,0.2);
    --shadow-md: 0 5px 15px rgba(0,0,0,0.3);
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-tap-highlight-color: transparent;
}

html, body {
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: 'Orbitron', sans-serif;
    background: var(--bg-main);
    color: var(--text-primary);
    position: relative;
    user-select: none;
}

/* Loading Screen */
#loading-screen {
    position: fixed;
    inset: 0;
    background: var(--bg-main);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    color: var(--text-primary);
    transition: opacity 0.5s ease-out;
}

.loading-helicopter {
    font-size: 60px;
    animation: loading-hover 1.5s ease-in-out infinite;
    margin-bottom: 20px;
}

@keyframes loading-hover {
    0%, 100% { transform: translateY(0) rotate(-2deg); }
    50% { transform: translateY(-10px) rotate(2deg); }
}

.loading-text {
    font-size: 18px;
    color: var(--text-secondary);
    margin-bottom: 20px;
}

.loading-bar {
    width: 200px;
    height: 4px;
    background: var(--border-color);
}

.loading-bar-fill {
    height: 100%;
    background: var(--accent-primary);
    width: 0%;
    animation: loading-progress 1.5s ease-out forwards;
}

@keyframes loading-progress {
    to { width: 100%; }
}

/* Map Container */
#map-container {
    position: absolute;
    inset: 0;
    overflow: hidden;
    background: var(--bg-main);
}

#map-viewport {
    position: absolute;
    width: 2048px;
    height: 1448px;
    transform-origin: top left;
    transition: transform 0.1s linear;
    will-change: transform;
}

#map-image {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    filter: sepia(0.1) brightness(1.05);
}

/* Helicopter */
#helicopter-container {
    position: absolute;
    width: 60px;
    height: 60px;
    transform-origin: center center;
    z-index: 100;
    pointer-events: none;
    will-change: transform;
    left: 0;
    top: 0;
}

#helicopter {
    position: absolute;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
}

#main-rotor {
    transform-origin: center;
    animation: rotor-spin 0.1s linear infinite;
}
@keyframes rotor-spin {
    to { transform: rotate(360deg); }
}

/* HUD (Subtler) */
#hud-container {
    position: fixed;
    top: 10px; /* Raised slightly */
    left: 10px;
    right: 10px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    z-index: 200;
    pointer-events: none;
}

.hud-panel {
    background: rgba(0, 10, 20, 0.6); /* Darker, less saturated */
    backdrop-filter: blur(8px);
    border: 1px solid rgba(0, 255, 255, 0.2); /* Thinner, subtler border */
    border-radius: 6px;
    padding: 8px 12px; /* Reduced padding */
    box-shadow: 0 2px 8px rgba(0,0,0,0.3); /* Softened shadow */
    text-shadow: 0 0 4px rgba(0, 255, 255, 0.7); /* Reduced glow */
    pointer-events: auto;
    transition: all 0.3s ease;
}

.hud-row { display: flex; align-items: baseline; gap: 6px; margin: 2px 0; }
.hud-label { color: var(--text-secondary); font-size: 12px; }
.hud-value { font-weight: bold; font-size: 16px; color: var(--text-primary); }

#compass { width: 40px; height: 40px; position: relative; margin-left: 10px; }
#compass-ring { 
    position: absolute; inset: 0; 
    border: 1px solid var(--text-secondary); 
    border-radius: 50%;
    color: var(--text-secondary);
    font-weight: bold;
    font-size: 10px;
    display: flex;
    justify-content: center;
    padding-top: 1px;
}
#compass-needle { 
    position: absolute; inset: 0; transition: transform 0.1s linear;
}
#compass-needle::before { 
    content: '‚ñ≤'; 
    position: absolute; top: -3px; left: 50%; 
    transform: translateX(-50%); 
    color: var(--accent-primary); 
    font-size: 18px; 
}

/* Controls */
#controls-container {
    position: fixed;
    bottom: 20px;
    left: 20px;
    right: 20px;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    z-index: 300;
    pointer-events: none;
}

#joystick-container { width: 130px; height: 130px; position: relative; pointer-events: auto; }
#joystick-base { 
    position: absolute; inset: 0; 
    background: rgba(0, 20, 40, 0.6);
    border: 2px solid var(--border-color);
    border-radius: 50%; 
    box-shadow: 0 0 15px var(--accent-primary), inset 0 0 5px var(--accent-primary);
}
#joystick-handle { 
    position: absolute; width: 60px; height: 60px; top: 50%; left: 50%; 
    transform: translate(-50%, -50%); 
    background: var(--accent-primary);
    border: 2px solid var(--accent-primary);
    border-radius: 50%; 
    box-shadow: 0 0 10px var(--accent-primary);
    cursor: grab; touch-action: none; 
}
#joystick-handle:active { cursor: grabbing; }

/* Action Buttons */
.action-buttons { display: flex; gap: 15px; align-items: center; pointer-events: auto; }
.action-button { 
    width: 70px; height: 70px; 
    background: var(--accent-primary); 
    border: 2px solid var(--accent-primary);
    border-radius: 50%; 
    font-size: 16px; font-weight: bold; 
    color: var(--bg-main);
    display: none; 
    justify-content: center; align-items: center; cursor: pointer; 
    box-shadow: 0 0 15px var(--accent-primary);
    transition: all 0.2s ease; 
}
.action-button.visible { display: flex; }
.action-button:hover { transform: scale(1.05); box-shadow: 0 0 25px var(--accent-primary); }
.action-button:active { transform: scale(0.95); }
.action-button.secondary { 
    background: var(--accent-secondary); 
    border-color: var(--accent-secondary);
    box-shadow: 0 0 15px var(--accent-secondary);
    width: 55px; height: 55px; font-size: 24px;
}

/* Menu */
#menu-container { position: fixed; top: 0; right: -350px; width: 350px; height: 100%; background: var(--bg-panel); backdrop-filter: blur(10px); border-left: 1px solid var(--border-color); z-index: 400; transition: right 0.3s ease; display: flex; flex-direction: column; box-shadow: var(--shadow-lg); }
#menu-container.open { right: 0; }
#menu-header { padding: 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
#menu-title { font-size: 22px; font-weight: bold; }
#menu-close { background: none; border: none; font-size: 22px; color: var(--text-secondary); cursor: pointer; transition: color 0.2s; }
#menu-close:hover { color: var(--text-primary); }
#menu-content { flex: 1; overflow-y: auto; padding: 20px; }
.menu-section { margin-bottom: 25px; }
.menu-section-title { font-size: 14px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px; }
#poi-list { display: flex; flex-direction: column; gap: 8px; }
.poi-item { border: 1px solid var(--border-color); border-radius: 6px; padding: 10px; cursor: pointer; transition: all 0.2s ease; }
.poi-item:hover { background: rgba(0,0,0,0.03); border-color: var(--accent-primary); }
.poi-item.visited { background: rgba(0,0,0,0.05); text-decoration: line-through; }
.poi-item-header { display: flex; align-items: center; gap: 10px; }
.poi-item-name { flex: 1; font-weight: bold; font-size: 15px; }
.poi-item-status { color: var(--accent-success); font-size: 16px; font-weight: bold; text-decoration: none; }

/* Stats */
.stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.stat-card { background: rgba(0,0,0,0.03); border-radius: 6px; padding: 10px; text-align: center; }
.stat-value { font-size: 20px; font-weight: bold; }
.stat-label { font-size: 12px; color: var(--text-secondary); }

/* Modals */
.modal { position: fixed; inset: 0; background: rgba(0,0,0,0.6); display: flex; justify-content: center; align-items: center; z-index: 500; opacity: 0; visibility: hidden; transition: all 0.3s ease; backdrop-filter: blur(5px); }
.modal.active { opacity: 1; visibility: visible; }
.modal-content { background: var(--bg-panel); border: 1px solid var(--border-color); padding: 30px; border-radius: 12px; width: 90%; max-width: 550px; box-shadow: 0 0 20px var(--accent-primary), inset 0 0 10px var(--accent-primary); text-shadow: 0 0 5px var(--accent-primary); transform: scale(0.9); transition: all 0.3s ease; }
.modal.active .modal-content { transform: scale(1); }
.modal-header { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
.modal-icon { width: 40px; height: 40px; background: var(--accent-primary); border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 18px; font-weight: bold; color: var(--bg-main); flex-shrink: 0; box-shadow: 0 0 10px var(--accent-primary); }
.modal.visited .modal-icon { background: var(--accent-success); }
.modal h2 { flex: 1; margin: 0; font-size: 24px; }
.modal-description { color: var(--text-secondary); line-height: 1.7; font-size: 15px; margin-bottom: 25px; max-height: 150px; overflow-y: auto; }
.modal-stats { display: flex; gap: 15px; margin-bottom: 25px; }
.modal-stat { flex: 1; text-align: center; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 6px; border: 1px solid var(--border-color); }
.modal-stat-value { font-size: 18px; font-weight: bold; }
.modal-stat-label { font-size: 12px; color: var(--text-secondary); }
.modal-buttons { display: flex; gap: 15px; justify-content: flex-end; }
.modal-button { background: var(--accent-primary); color: var(--bg-main); border: none; padding: 12px 25px; border-radius: 6px; font-size: 15px; font-weight: bold; cursor: pointer; transition: all 0.2s ease; box-shadow: 0 0 10px var(--accent-primary); }
.modal-button:hover { filter: brightness(1.2); box-shadow: 0 0 15px var(--accent-primary); }
.modal-button.secondary { background: var(--accent-secondary); box-shadow: 0 0 10px var(--accent-secondary); }

/* Achievements */
.achievement-toast { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); background: var(--accent-success); color: white; padding: 12px 25px; border-radius: 50px; box-shadow: var(--shadow-md); display: flex; align-items: center; gap: 10px; z-index: 600; transition: top 0.5s ease; }
.achievement-toast.show { top: 20px; }
.achievement-icon { font-size: 20px; }
.achievement-text { font-weight: bold; }

/* Minimap */
#minimap { position: fixed; bottom: 20px; right: 20px; width: 180px; height: 135px; background: rgba(255,255,255,0.7); border: 2px solid var(--border-color); border-radius: 8px; overflow: hidden; z-index: 200; box-shadow: var(--shadow-md); }
#minimap-canvas { width: 100%; height: 100%; }

/* Responsive */
@media (max-width: 768px) {
    #hud-container { flex-direction: column; gap: 10px; }
    #menu-container { width: 100%; right: -100%; }
    #minimap { display: none; }
}
```
